<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title><%= title %></title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 900px; margin: 20px auto; }
        header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
        table { width: 100%; border-collapse: collapse; margin-top: 10px; }
        th, td { border: 1px solid #ccc; padding: 8px; font-size: 14px; }
        th { background-color: #f5f5f5; }
        .pagination { margin-top: 15px; text-align: center; }
        .pagination a { margin: 0 3px; text-decoration: none; }
        .pagination .current { font-weight: bold; text-decoration: underline; }
        form.search { margin-top: 10px; }
    </style>
</head>
<body>
<header>
    <h2>자유게시판</h2>
    <a href="/todos/write">새 글 작성</a>
</header>

<form class="search" method="get" action="/board">
    <input type="text" name="keyword" placeholder="제목 검색" value="<%= keyword || '' %>">
    <button type="submit">검색</button>
</form>

<table>
    <thead>
    <tr>
        <th style="width: 60px;">번호</th>
        <th>제목</th>
        <th style="width: 120px;">작성자</th>
        <th style="width: 80px;">조회수</th>
        <th style="width: 150px;">작성일</th>
    </tr>
    </thead>
    <tbody>
    <% if (posts.length === 0) { %>
        <tr>
            <td colspan="5" style="text-align:center;">게시글이 없습니다.</td>
        </tr>
    <% } else { %>
        <% posts.forEach(function(post) { %>
            <tr>
                <td><%= post.post_id %></td>
                <td>
                    <a href="/board/<%= post.post_id %>"><%= post.title %></a>
                </td>
                <td><%= post.writer_name || '익명' %></td>
                <td><%= post.view_count %></td>
                <td><%= post.created_at %></td>
            </tr>
        <% }) %>
    <% } %>
    </tbody>
</table>

<div class="pagination">
    <% for (let p = 1; p <= totalPages; p++) { %>
        <% if (p === currentPage) { %>
            <span class="current"><%= p %></span>
        <% } else { %>
            <a href="/board?page=<%= p %>&keyword=<%= keyword || '' %>"><%= p %></a>
        <% } %>
    <% } %>
</div>

</body>
</html>